ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
Phát triển xe tựhành nhận diện biển báo và vật cản
Phan Minh Thuận1, Huỳnh Nhật Nam2, Nguyễn Thái Văn3, Đặng ThếKỷ4
1 Đại học sư phạm Kỹthuật Tp. HồChí Minh
2 Đại học sư phạm Kỹthuật Tp. HồChí Minh
3 Đại học sư phạm Kỹthuật Tp. HồChí Minh
4 Đại học sư phạm Kỹthuật Tp. HồChí Minh
THÔNG TIN BÀI VIẾT
TÓM TẮT
Ngày nhận bài:
Đềtài "Phát triển xe tựhành nhận diện biển báo và vật cản" được chọn vì
mong muốn tìm hiểu theo xu hướng vềcông nghệtựđộng hóa hiện nay,
cũng như tìm hiểu vềcác sựmới mẻcủa công nghệtựđộng hóa và
cũng vì xe tựhành đang là một chủđềnghiên cứu thu hút sựchú ý toàn
cầu. Mục tiêu của chúng tôi là phát triển một mẫu thửxe tựhành có khả
năng thực hiện các nhiệm vụchính như dò line, bật coi khi phát hiện và né
tránh vật cản, cũng như dừng nhận diện được biển báo “Stop”. Việc phát
triển mẫu thửxe tựhành giúp hiểu rõ hơn vềxu hướng xe tựhành hiện nay,
sinh viên có cơ hội áp dụng những môn đã học vềlập trình, trí tuệnhân tạo
vào đềtài. Khi tham gia vào đềtài này, sinh viên sẽđược tiếp cận các công
nghệmới từđó mởrộng tầm hiểu biết của mình vềlĩnh vực tựđộng hóa.
Đặc biệt là luyện tập kỹnăng làm việc nhóm cũng như các kỹnăng về
nghiên cứu khoa học.
Ngày hoàn thiện:
Ngày chấp nhận đăng:
Ngày đăng:
TỪKHÓA
Xe tựhành;
Dò line;
Cảm biến;
Thịgiác máy tính;
Trí tuệnhân tạo.
Doi: https://doi.org/10.54644/jtexxxxxxx
Copyright © JTE. This is an open access article distributed under the terms and conditions of the Creative Commons Attribution-NonCommercial 4.0
International License which permits unrestricted use, distribution, and reproduction in any medium for non-commercial purpose, provided the original work is
properly cited.
1.
Giới thiệu
1.1. Lí do chọn đềtài
Xu hướng xe tựhành hiện nay trên thếgiới đang tiếp tục phát triển mạnh mẽvà thu hút sựquan tâm
lớn từcảngành công nghiệp ô tô và các công ty công nghệhàng đầu. Các công nghệvà ứng dụng mới liên
tục được ra đời, từcác hệthống tựlái bậc thấp cho đến những công nghệtựhành hoàn toàn.Các công ty
hàng đầu như Tesla, Waymo, và Baidu đang đầu tư mạnh vào nghiên cứu và phát triển các giải pháp xe tự
lái. Tesla, với công nghệFull Self-Driving (FSD), đã thửnghiệm các tính năng tựlái bậc thấp trên toàn
cầu, trong khi Waymo và Baidu đã thành công trong việc triển khai dịch vụtaxi tựhành tại một sốthành
phố.Ngoài ra, cảUber và Lyft đang tích cực phát triển công nghệxe tựlái đểcung cấp dịch vụtaxi tựlái
trong tương lai. Sựcạnh tranh giữa các công ty công nghệvà các nhà sản xuất ô tô đang tạo ra một sân
chơi cạnh tranh sôi động và thú vị, đồng thời mởra những cơ hội mới cho sựđổi mới và tiến bộtrong
ngành công nghiệp giao thông và di chuyển toàn cầu.
Tại Việt Nam, xu hướng xe tựhành đang dần trởnên rõ ràng và thu hút sựquan tâm từcác nhà sản
xuất công nghệvà khách hàng. Cụthể, các tổchức nghiên cứu, trường đại học và các doanh nghiệp công
nghệđang tích cực nghiên cứu và phát triển các giải pháp xe tựhành. Có nhiều dựán đã được khởi tạo,
tập trung vào việc áp dụng trí tuệnhân tạo và các công nghệcảm biến đểcải thiện khảnăng tựlái của các
loại xe. Trong đó, VinGroup là một trong những tập đoàn lớn và đa ngành hàng đầu tại Việt Nam, đã bắt
đầu đầu tư và nghiên cứu vềcông nghệxe tựhành. VinFast, công ty con của VinGroup chuyên sản xuất ô
tô và xe máy, đã công bốkếhoạch phát triển xe tựlái vào năm 2019. VinFast đang hợp tác với các đối tác
trong và ngoài nước đểnghiên cứu và phát triển các giải pháp xe tựhành, từhệthống cảm biến đến trí tuệ
nhân tạo và phần mềm điều khiển. Sựđầu tư mạnh mẽcủa VinGroup vào lĩnh vực này cho thấy cam kết
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
của họtrong việc thúc đẩy sựphát triển của ngành công nghiệp ô tô và công nghệtựđộng hóa tại Việt
Nam. Ngoài VinGroup thì Viettel và FPT cũng là những tập đoàn lớn đều đang đầu tư vào nghiên cứu và
thửnghiệm các công nghệmới trong lĩnh vực này.
Giới trẻcụthểlà sinh viên Việt Nam đối với xe tựhành hiện nay thểhiện sựquan tâm và hứng thú
ngày càng gia tăng, cùng với sựsẵn lòng tham gia và đóng góp vào việc phát triển của ngành công nghiệp
và công nghệtựđộng hóa. Sinh viên thểhiện sựquan tâm này thông qua việc tham gia vào các cuộc thi và
sựkiện liên quan đến xe tựhành, ngoài ra còn vô sốcuộc thi trong nước như Robocon, cuộc thi Robot dò
line... Nhằm bắt kịp xu hướng vềcông nghệtựđộng hóa hiện nay, cũng như tìm hiểu vềcác sựmới mẻ
của công nghệtựđộng hóa nhóm em đã quyết định chọn đềtài "Phát triển xe tựhành nhận diện biển báo
và vật cản".
1.2. Mục tiêu
Mục tiêu của dựán này là phát triển một mẫu thửvềxe tựhành có khảnăng thực hiện nhiều nhiệm
vụtrong môi trường mô phỏng. Xe tựhành được thiết kếđểtựđộng xác định và đi theo line trên một môi
trường mô phỏng đường phố, đồng thời có khảnăng nhận diện và phản ứng với biển báo "stop" bằng cách
dừng lại. Ngoài ra, xe sẽđược trang bịhệthống cảnh báo là còi báo hiệu và vượt qua vật trên đường mô
phỏng, đồng thời trởlại line ban đầu sau khi vượt qua vật cản.
2.
Phương pháp tiếp cận
2.1. Link kiện
2.1.1 Raspberry Pi 3 B+
Raspberry Pi 3 B+ được Raspberry Pi Foundation giới thiệu vào ngày 14 tháng 3 năm 2018. Đây là
phiên bản nâng cao của Raspberry Pi 3 B được giới thiệu vào năm 2016.
Nó là một bo mạch máy tính nhỏđi kèm với CPU, GPU, cổng USB, chân I/O, Wifi, Bluetooth và
Network Boot có khảnăng thực hiện một sốchức năng như một bộmáy tính thông thường.
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
2.1.2.
Camera Raspberry: picamera2
Camera cho Raspberry Pi có thểđược sửdụng đểquay video độphân giải cao, cũng như ảnh tĩnh.
Nó dễsửdụng cho người mới bắt đầu, nhưng cũng có thểcung cấp cho người dùng nâng cao nếu bạn
đang muốn mởrộng kiến thức của mình.
2.1.3.
Cảm biến siêu âm: HSRC04
Cảm biến siêu âm HC-SR04 (Ultrasonic Sensor) được sửdụng rất phổbiến đểxác định khoảng cách
vì RẺvà CHÍNH XÁC. Cảm biến HC-SR04 sửdụng sóng siêu âm và có thểđo khoảng cách trong khoảng
từ2 -> 300cm, với độchính xác gần như chỉphụthuộc vào cách lập trình.
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
2.1.4.
Driver LS98N
Driver L298N là module điều khiển động cơ trong các xe DC và động cơ bước. Module điều khiển
động cơ L298N có IC điều khiển động cơ L298, Bộđiều chỉnh điện áp 78M05, điện trở, tụđiện, LED
nguồn, jumper 5V tích hợp.. Module L298N có thểđiều khiển tối đa 4 động cơ DC hoặc 2 động cơ DC
với khảnăng điều khiển hướng và tốc độ.
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
2.1.5.
Cảm biến ánh sáng
Cảm biến cường độánh sáng phát hiện cường độánh sáng, sửdụng bộcảm biến photoresistor loại
nhạy cảm, cho tín hiệu ổn định, rõ ràng và chính xác hơn so với quang trởđộnhạy có thểtùy chỉnh. Thiết
kếđơn giản nhưng hiệu quảvà độtin cậy cao, độnhiễu thấp do được thiết kếmạch lọc tín hiệu trước khi
so sánh với ngưỡng.
2.2.
Các thuật toán
2.2.1. Xửlý ảnh phát hiện line
Sửdụng động cơ hoạt động. Thông qua hình ảnh từcamera, hệthống có thểnhận diện được làn
đường và từđó tính toán, điều chỉnh hướng di chuyển của xe.
Đầu tiên, tạo các thư viện OpenCV, Picamera2 và Numpy đểxửlý hình ảnh được trích xuất từ
camera và điều khiển
mặt nạtách nền và chuyển đổi ảnh sang không gian màu HSV.
imgBorder = cv2.GaussianBlur(img, (5, 5), cv2.BORDER_DEFAULT)
imgHsv = cv2.cvtColor(imgBorder, cv2.COLOR_BGR2HSV)
h_min = cv2.getTrackbarPos("HUE Min", "HSV")
h_max = cv2.getTrackbarPos("HUE Max", "HSV")
s_min = cv2.getTrackbarPos("SAT Min", "HSV")
s_max = cv2.getTrackbarPos("SAT Max", "HSV")
v_min = cv2.getTrackbarPos("VAL Min", "HSV")
v_max = cv2.getTrackbarPos("VAL Max", "HSV")
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
lowerWhite = np.array([h_min, s_min, v_min])
upperWhite = np.array([h_max, s_max, v_max])
lowerWhite = np.array([0, 0, 0])
upperWhite = np.array([179, 255, 115])
maskWhite = cv2.inRange(imgHsv, lowerWhite, upperWhite)
Tiếp theo, trích xuất góc từtrên cao
hT, wT = img.shape[:2]
wrapYTopLeft = 20
wrapYTopRight = 20
wrapXTopLeft = 110
wrapXTopRight = 70
pts1 = [[0, height], [width, height], [width-wrapXTopRight, wrapYTopLeft],
[wrapXTopLeft, wrapYTopRight]]
pts2 = [[0, height], [width, height], [width, 0], [0, 0]]
src = np.float32(pts1)
des = np.float32(pts2)
matrix = cv2.getPerspectiveTransform(src, des)
imgWarp = cv2.warpPerspective(maskWhite, matrix, (wT, hT))
Tiếp theo, tính độlệch giữa trung tâm đường và tâm ảnh
minPer = 0.5
region = 4
h, w = imgWarp.shape[:2]
histValues = np.sum(imgWarp[-h//region:, :], axis=0)
maxValue = np.max(histValues)
minValue = minPer * maxValue
indexArray = np.where(histValues >= minValue)
RoadCenter = int(np.average(indexArray))
imgHist = np.zeros((h, w, 3), np.uint8)
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
imgCenter = 240
dist = (RoadCenter - imgCenter)
Cuối cùng, làm mịn giá trịkhoảng cách, áp dụng phép biển đổi logarit và căn bậc hai đểlàm mịn giá
trị.
def smoothed(dist):
normalizedDist = dist/240
n = np.sqrt(np.log10(abs(normalizedDist)/4+1))
return n*(dist>15)-n*(dist<-15)
2.2.2.
Dùng cảm biến siêu âm phát hiện vật cản
Tính khoảng cách bằng cách phát ra sóng âm thanh và sau đó lắng nghe tiếng vang. Nó đo thời gian
giữa việc gửi và nhận sóng âm, tính toán khoảng cách dựa trên thời gian này và trảvềkhoảng cách tính
bằng centimet.
def measure_distance():
gpio.output(trig, False)
time.sleep(0.1)
gpio.output(trig, True)
time.sleep(0.00001)
gpio.output(trig, False)
while gpio.input(echo) == 0:
pulse_start = time.time()
while gpio.input(echo) == 1:
pulse_end = time.time()
pulse_duration = pulse_end - pulse_start
distance = pulse_duration * 17000
distance = round(distance, 3)
return distance
2.2.3.
Nhận diện biển báo giao thông
Sau khi train dữliệu, thu được file xml
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
Sau đó nhận diện biển báo và trảvềkết quảtương ứng, nhóm chúng em chỉlàm trên biển báo Stop.
stop_sign = cv2.CascadeClassifier('cascade_stop_sign.xml')
def detect_stop_sign(img):
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
ISSN: 1859-1272
TẠP CHÍ KHOA HỌC GIÁO DỤC KỸTHUẬT
Trường Đại học Sư phạm Kỹthuật Thành phốHồChí Minh
Website: https://jte.edu.vn
Email: jte@hcmute.edu.vn
stop_sign_scaled = stop_sign.detectMultiScale(gray, 1.3, 5)
if len(stop_sign_scaled) > 0:
# Nếu có biển báo stop được phát hiện
for (x, y, w, h) in stop_sign_scaled:
# Vẽkhung xanh xung quanh biển báo
img = cv2.rectangle(img, (x, y), (x+w, y+h), (0, 255, 0), 3)
# Thêm văn bản "Stop Sign" dưới biển báo
img = cv2.putText(img, "Stop Sign", (x, y+h+30),
cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 0, 255), 2,
cv2.LINE_4)
return "stop"
else:
return "go"
3.
Kết quảvà thảo luận
Nhận diện line: mẫu thửxe tựhành có thểnhận diện 2 line và đi theo 2 line đó.
Nhận diện biển báo: Mẫu xe tựhành này có thểnhận diện biển báo STOP, khi gặp biển STOP, xe sẽ
báo còi và dừng lại.
Nhận diện vật cản: Mẫu xe tựhành có thểnhận diện vật cản nhờvào cảm biến siêu âm HC-SR04, khi
phát hiện có vật cản, xe sẽbáo còi và vượt qua vật cản.
4.
Kết luận
Lời cám ơn
Chúng em xin bày tỏlòng biết ơn sâu sắc đến thầy Nguyễn Xuân Sâm, người đã tận tâm hướng dẫn
và truyền đạt kiến thức quý báu trong suốt quá trình thực hiện dựán này. Sựhỗtrợnhiệt tình và những lời
khuyên chân thành của thầy đã giúp chúng em vượt qua nhiều khó khăn và hoàn thành công việc một cách
tốt đẹp. Chúng em cũng xin trân trọng cảm ơn các tác giảcủa những công trình nghiên cứu và bài báo mà
chúng em đã tham khảo. Những kiến thức và thông tin từcác công trình này đã đóng góp quan trọng vào
sựphát triển của dựán. Chúng em thật sựbiết ơn sựgiúp đỡvô giá này và hy vọng rằng trong tương lai,
chúng em sẽcó cơ hội tiếp bước thầy và các tác giả, đểtiếp tục hỗtrợvà truyền cảm hứng cho các thếhệ
nghiên cứu tiếp theo, góp phần phát triển lĩnh vực này ngày càng thịnh vượng.
Xung đột lợi ích
Các tác giảtuyên bốkhông có xung đột lợi ích trong bài báo này.
Tuyên bốdữliệu sẵn có
Dữliệu hỗtrợcho các khám phá của nghiên cứu này khi độc giảyêu cầu một cách hợp lý sẽđược tác
giảliên hệcung cấp.
TÀI LIỆU THAM KHẢO
[1] Introduction to Raspberry Pi 3 B+, David Watson
https://www.theengineeringprojects.com/2018/07/introduction-to-raspberry-pi-3-b-plus.html
